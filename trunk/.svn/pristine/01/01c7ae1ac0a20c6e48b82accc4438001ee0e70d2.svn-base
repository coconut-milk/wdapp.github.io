!function(i){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=i,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){!function(){function t(e){try{window.PeerConnection=window.PeerConnection||window.webkitPeerConnection00||window.webkitRTCPeerConnection||window.mozRTCPeerConnection,window.URL=window.URL||window.webkitURL||window.msURL||window.oURL,window.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.nativeRTCIceCandidate=window.mozRTCIceCandidate||window.RTCIceCandidate,window.nativeRTCSessionDescription=window.mozRTCSessionDescription||window.RTCSessionDescription}catch(t){}this.usersPcs={length:0},this.local={type:{video:!1,audio:!1},video:{},audio:{}},this.isRequesting=!1,this.requestInteraction=function(t,i){l("Interaction","请求互动"),this.local.type=t,this.isRequesting=!0,this.setRequestTimeoutTimer(),this.createLocalMedia(function(e){e?"function"==typeof window.on_cc_live_interaction_error&&window.on_cc_live_interaction_error(d.interaction.local.type,e,"创建音视频信息出错"):I.requestInteraction(t,i)})},this.setCallingTimer=function(){d.interaction.interactionTime=0,d.interaction.interactionTimeInterval=setInterval(function(){if(++d.interaction.interactionTime,"function"==typeof window.on_cc_live_interaction_interval){var e=d.interaction.local.type,t=d.interaction.interactionTime;window.on_cc_live_interaction_interval(e,t)}},1e3)},this.clearCallingTimer=function(){d.interaction.interactionTime=0,clearInterval(d.interaction.interactionTimeInterval)},this.setRequestTimeoutTimer=function(){d.interaction.REQUEST_INTERACTION_TIMEOUT=setTimeout(function(){d.interaction.REQUEST_INTERACTION_TIMEOUT=-1,d.interaction.hangupInteraction(P.viewerid),d.interaction.stopLocalStream(),d.interaction.isRequesting=!1,$("#interactionLocalVideo")[0].src="",$("#videoInteraction").hide(),"function"==typeof window.on_cc_live_interaction_request_timeout&&window.on_cc_live_interaction_request_timeout(d.interaction.local.type)},6e4)},this.clearRequestTimeoutTimer=function(){0<d.interaction.REQUEST_INTERACTION_TIMEOUT&&(clearTimeout(d.interaction.REQUEST_INTERACTION_TIMEOUT),d.interaction.REQUEST_INTERACTION_TIMEOUT=-1)},this.stopLocalStream=function(){if(d.interaction.local.video.stream)try{d.interaction.local.video.stream.getTracks().forEach(function(e){e.stop()})}catch(t){}if(d.interaction.local.audio.stream)try{d.interaction.local.audio.stream.getTracks().forEach(function(e){e.stop()})}catch(t){}},this.cancelInteraction=function(){d.interaction.isRequesting=!1,"function"==typeof window.on_cc_live_interaction_cancal&&window.on_cc_live_interaction_cancal(d.interaction.local.type)},this.disconnectInteraction=function(o){P.openSound(),this.clearRequestTimeoutTimer(),o==P.viewerid?$.each(d.interaction.usersPcs,function(e,t){var i=t.pc;if(null==i)return!0;if(i.close(),i=null,d.interaction.usersPcs[e]){delete d.interaction.usersPcs[e];var n=d.interaction.usersPcs.length-1;d.interaction.usersPcs.length=n<0?0:n}}):$.each(d.interaction.usersPcs,function(e,t){var i=t.pc;if(!i)return!0;if(e!=o)return!0;if(i.close(),i=null,d.interaction.usersPcs[e]){delete d.interaction.usersPcs[e];var n=d.interaction.usersPcs.length-1;d.interaction.usersPcs.length=n<0?0:n}}),0==d.interaction.usersPcs.length&&this.stopLocalStream(),d.interaction.isInteractioning=!1,d.interaction.isRequesting=!1},this.createLocalAudioAndVideoMedia=function(t){var i=this;getUserMedia.call(navigator,{video:!0,audio:!0},function(e){i.local.video.stream=e,t&&"function"==typeof t&&t(e)},function(e){l("Interaction","getUserMedia error: "+e),t&&"function"==typeof t&&t(e)})},this.createLocalAudioMedia=function(t){var i=this;getUserMedia.call(navigator,{video:!1,audio:!0},function(e){i.local.audio.stream=e,t&&"function"==typeof t&&t(e)},function(e){l("Interaction","getUserMedia error: "+e),t&&"function"==typeof t&&t(e)})},this.createLocalMedia=function(t){var i=this,n=i.local.type;getUserMedia.call(navigator,n,function(e){n.video?i.local.video.stream=e:i.local.audio.stream=e,"function"==typeof window.on_cc_live_interaction_local_media&&window.on_cc_live_interaction_local_media(n,e),t&&"function"==typeof t&&t()},function(e){l("Interaction","getUserMedia error: "+e),t&&"function"==typeof t&&t(e)})},this.iceServers={iceServers:[{url:"stun:turn.csslcloud.net:3478",credential:"bokecc",username:"cc"},{url:"turn:turn.csslcloud.net:3478",credential:"bokecc",username:"cc"}]},this.createAnswerPeerConnection=function(t){var i=new PeerConnection(this.iceServers);"audio"==t.type?(d.interaction.local.audio.stream||this.createLocalAudioMedia(),i.addStream(d.interaction.local.audio.stream)):(d.interaction.local.video.stream||this.createLocalAudioAndVideoMedia(),i.addStream(d.interaction.local.video.stream)),i.onaddstream=function(e){"function"==typeof window.on_cc_live_interaction_remote_media&&window.on_cc_live_interaction_remote_media(d.interaction.local.type,t,e.stream)},i.createAnswer(function(e){i.setLocalDescription(e),P.sendInteractionMessage(d.interaction.local.type,t.id,"answer",e)},function(e){l("Interaction","Failure callback: "+e)}),i.onicecandidate=function(e){null!==e.candidate&&P.sendInteractionMessage(d.interaction.local.type,t.id,"",e.candidate)},d.interaction.usersPcs[t.id]={pc:i,user:t},d.interaction.usersPcs.length+=1},this.createOfferPeerConnection=function(t){var i=new PeerConnection(this.iceServers),n=d.interaction.local.type;n.video?i.addStream(d.interaction.local.video.stream):i.addStream(d.interaction.local.audio.stream),i.onaddstream=function(e){"function"==typeof window.on_cc_live_interaction_remote_media&&window.on_cc_live_interaction_remote_media(d.interaction.local.type,t,e.stream)},i.oniceconnectionstatechange=function(e){l("Interaction","iceConnectionState ..."+i.iceConnectionState),"failed"==i.iceConnectionState&&(l("Interaction","iceConnectionState failed"),d.interaction.hangupInteraction(),"function"==typeof window.on_cc_live_interaction_disconnect&&window.on_cc_live_interaction_disconnect({disconnectid:P.viewerid}))},i.createOffer(function(e){i.setLocalDescription(e),P.sendInteractionMessage(n,t.id,"offer",e)},function(e){"function"==typeof window.on_cc_live_interaction_error&&window.on_cc_live_interaction_error(d.interaction.local.type,e,"createOfferPeerConnection")}),i.onicecandidate=function(e){null!==e.candidate&&P.sendInteractionMessage(n,t.id,"",e.candidate)},d.interaction.usersPcs[t.id]={pc:i,user:t},d.interaction.usersPcs.length+=1},this.id=e.interaction.id,this.isSupportInteraction=function(){return"https:"===window.location.protocol&&!!(PeerConnection&&URL&&getUserMedia&&nativeRTCIceCandidate&&nativeRTCSessionDescription)},this.hangupInteraction=function(e){this.isInteractioning?I.hangupInteraction(this.type,e):(this.isRequesting&&I.cancelRequestInteraction(this.type,e),this.stopLocalStream(),this.cancelInteraction())}}var o=function(e,t,i){$.ajax({url:e,type:"GET",dataType:"jsonp",data:t,xhrFields:{withCredentials:!0},success:function(e){e.success?"function"==typeof i?i(e):console.log&&console.log("onQuestionnairePublish is undefined"):i(e)},error:function(e){"function"==typeof i?i({errorCode:1,msg:"request error",result:e}):console.log&&console.log("onQuestionnairePublish is undefined")}})},S={DocModeType:{NormalMode:0,FreeMode:1},isDPReady:!1,dpc:{},fastMode:!1,init:function(){this.dpc=new Dpc},appendDrawPanel:function(){var e='<iframe id="dpa" allow-scripts allowfullscreen allowusermedia frameborder="0" style="width: 100%;height:100%;"></iframe>';"isMobile"==R.isMobile()&&(e='<iframe id="dpa" allow-scripts allowfullscreen allowusermedia frameborder="0" style="width: 100%;height:100%;pointer-events: none;"></iframe>'),$("#drawPanel").parent().append(e),$("div#drawPanel").remove(),"function"==typeof window.on_cc_live_db_flip&&window.on_cc_live_db_flip()},pageChange:function(e){this.isDPReady&&this.fastMode&&this.dpc.pageChange(e)},animationChange:function(e){this.isDPReady&&this.fastMode&&this.dpc.animationChange(e)},history:function(e){this.isDPReady&&this.fastMode&&this.dpc.history(e)},draw:function(e){this.isDPReady&&this.fastMode&&this.dpc.draw(e)},clear:function(){this.isDPReady&&this.fastMode&&this.dpc.clear()},reload:function(){this.isDPReady&&this.fastMode&&this.dpc.reload()},setDocMode:function(e){this.isDPReady&&this.fastMode&&this.dpc.setFreeDocMode(e)},getDocs:function(e){this.isDPReady&&this.fastMode&&this.dpc.getDocs(P.roomid,P.userid,e)},changePageTo:function(e,t){this.isDPReady&&this.fastMode&&this.dpc.changePageTo(e,t)},showMarquee:function(e){this.isDPReady&&this.fastMode&&this.dpc.openMarquee(e)},closeMarquee:function(){this.isDPReady&&this.fastMode&&this.dpc.closeMarquee()},openBarrage:function(e){this.isDPReady&&this.fastMode&&this.dpc.openBarrage()},insertBarrage:function(e){if(this.isDPReady&&this.fastMode){var t;try{t=JSON.parse(e)}catch(i){t={type:"text",content:e}}this.dpc.insertBarrage(t)}},closeBarrage:function(){this.isDPReady&&this.fastMode&&this.dpc.closeBarrage()},docAdapt:function(e){if(this.isDPReady&&this.fastMode){var t=e?"1":"2";this.dpc.setDisplayMode(t)}}},P={DocModeType:{NormalMode:0,FreeMode:1},MediaScaleMode:{scale43:"4:3",scale169:"16:9",scaleFull:"full",scaleNormal:"normal"},init:function(e){void 0===e&&(e={}),this.userid=$.trim(e.userid),this.roomid=$.trim(e.roomid),this.groupid=$.trim(e.groupid),this.viewername=$.trim(e.viewername),this.viewertoken=$.trim(e.viewertoken),this.forcibly=$.trim(e.forcibly),this.viewercustomua=$.trim(e.viewercustomua),this.language=$.trim(e.language),this.viewercustominfo=$.trim(e.viewercustominfo),this.ua=$.trim(e.ua),this.viewerid=$.trim(e.viewerid),this.upid=$.trim(e.upid),"string"==typeof e.fastMode?"false"===e.fastMode?this.fastMode=!1:this.fastMode=!0:"boolean"==typeof e.fastMode?this.fastMode=e.fastMode:this.fastMode=!1,S.fastMode=this.fastMode,this.forceNew=!1,"boolean"==typeof e.forceNew&&(this.forceNew=e.forceNew);var t=this,i=["//static.csslcloud.net/js/socket.io.js","//static.csslcloud.net/js/report.js"];if("isMobile"==R.isMobile())0<$("#drawPanel").length&&(S.fastMode||i.push("//static.csslcloud.net/js/module/drawingBoard-2.0.0.js"));else{if(!function r(){var e=!0;if(0<=navigator.appVersion.indexOf("MSIE"))try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(t){e=!1}else navigator.plugins["Shockwave Flash"]||(e=!1);return e}()&&("function"==typeof P.onNotSupportFlash&&P.onNotSupportFlash(),"18452D400D6B81D5"==this.userid)){var n=$("#"+k.id).parent().height(),o=$("#"+k.id).parent().width();$("#"+k.id).append('<div style="z-index: 999999;"><p style="color: #0e0e0e; width: 260px;">您还没有安装flash播放器,请点击<a href="http://www.adobe.com/go/getflash" style="color: red;" target="_blank">这里</a>安装</p></div>').parent().css("z-index","999999");var a=$($("#"+k.id+" div p")[0]).height(),s=$($("#"+k.id+" div p")[0]).width();$("#"+k.id+" div").css({"margin-left":(o-s-60)/2+"px","margin-top":(n-a)/2+"px"}),setInterval(function(){$("#"+k.id).parent().show()},3e3)}i.push("//static.csslcloud.net/js/swfobject.js","//static.csslcloud.net/js/json3.min.js")}t.loadScript(i,function(){if(t.login(function e(){t.history=new c}),"isMobile"==R.isMobile()&&$.DrawingBoard){$("#drawPanel").parent().append('<canvas id="drawPanel" width="1200" height="1200" style="position: absolute;z-index:2;top:0;left: 0"></canvas><iframe id="dpa" src="" frameborder="0" style="position: absolute;top:0;left: 0"></iframe>'),$("div#drawPanel").remove(),$.DrawingBoard.config()}})},login:function(M){$.ajax({url:"//view.csslcloud.net/api/room/login",type:"GET",dataType:"jsonp",data:{roomid:this.roomid,userid:this.userid,groupid:this.groupid,viewername:this.viewername,viewertoken:this.viewertoken,forcibly:this.forcibly,viewercustomua:this.viewercustomua,viewercustominfo:this.viewercustominfo},success:function(e){if(e.success){var t="https:"===window.location.protocol,i=e.datas.pusherNode.primary;if(t&&i&&i.indexOf(":")){var n=i.split(":");if(2==n.length){var o=parseInt(n[1]);if(!isNaN(o)){var a=o+400;i=n[0]+":"+a}}}var s=document.location.protocol+"//"+i+"/"+e.datas.pusher.nsp,r=e.datas.viewer.key;I.options.pusherUrl=s,I.options.key=r,P.viewerid=e.datas.viewer.id,P.viewername=e.datas.viewer.name,P.isBan=e.datas.room.isBan,P.liveid=e.datas.liveId,P.upid=e.datas.upId,P.multiQuality=e.datas.room.multiQuality,P.documentDisplayMode=e.datas.room.documentDisplayMode,P.isBarrage=e.datas.room.barrage,P.liveCountdown=e.datas.room.liveCountdown,P.groupId=e.datas.viewer.groupId;var c=document.getElementById("drawPanel");if(S.fastMode&&c){$("#documentDisplayMode").val(P.documentDisplayMode);var u=document.createElement("script");u.src="//image.csslcloud.net/js/dpc.js?v="+Math.floor(1e4*Math.random()),u.onload=function(){S.appendDrawPanel(),S.init(),S.isDPReady=!0,window.on_hdLive_drawPanel_complete&&window.on_hdLive_drawPanel_complete()},document.body.appendChild(u)}M();var d=e.datas.room.delayTime,l=e.datas.room.foreignPublish;(k.delay=d)<=0&&5e3,k.foreignPublish=l,k.openHostMode=e.datas.room.openHostMode,k.dvr=e.datas.room.dvr,k.barrageData=e.datas.room.barrage,k.warmVideoId=e.datas.room.encryptWarmVideoId,k.viewerid=e.datas.viewer.id;var f=e.datas.room.playerBackgroundImageUri;if(f)(t="https:"===window.location.protocol)&&(f=f.replace(/http:/g,"https:"));else f="";k.backgroundImageUri=f,"function"==typeof P.playerBackgroundImageUri&&P.playerBackgroundImageUri(f);var h=e.datas.room.playerBackgroundHint;h||(h=""),k.backgroundHint=h,"function"==typeof P.playerBackgroundHint&&P.playerBackgroundHint(h);var p=e.datas.announcement;"function"==typeof P.onAnnouncementShow&&p&&P.onAnnouncementShow(p);var g=e.datas.room.desc;"function"==typeof P.onLiveDesc&&P.onLiveDesc(g);var m=e.datas.room.showUserCount;"function"==typeof P.showUserCount&&P.showUserCount(m);var w=e.datas.viewer.marquee;if("function"==typeof P.getMarquee&&P.getMarquee(w),"function"==typeof P.onLoginSuccess){var v={desc:e.datas.template.desc,type:e.datas.template.type,name:e.datas.template.name,id:e.datas.template.id},y={id:e.datas.viewer.id,groupId:e.datas.viewer.groupId,name:e.datas.viewer.name},_={live:e.datas.live,template:v,viewer:y};P.onLoginSuccess(_)}var b=e.datas.live;switch("function"==typeof P.onLiveTime&&P.onLiveTime(b),I.init(),"isMobile"==R.isMobile()?R.init():k.init(),e.datas.template.type){case 6:N.init(),P.sendPublicChatMsg=P.sendPrivateChatMsg=function(){return!1};break;case 5:C.init(),N.init(),T.init();break;case 4:C.init(),T.init(),P.sendQuestionMsg=function(){return!1};break;case 3:C.init(),P.sendQuestionMsg=function(){return!1};break;case 2:C.init(),N.init();break;default:C.init(),N.init(),T.init()}}else"function"==typeof P.onLoginError&&P.onLoginError(e)}})},logout:function(n){n&&($.ajax({url:"//view.csslcloud.net/api/live/logout",type:"GET",dataType:"jsonp",timeout:5e3,xhrFields:{withCredentials:!0},success:function(e){"function"==typeof n.success&&n.success(e)},error:function(e,t,i){"function"==typeof n.error&&n.error({errorcode:"100",msg:"退出失败",info:i})}}),I.socket.disconnect())},getScript:function(e,t){var i=!1,n=document.createElement("script");n.src=e,n.onload=n.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,t&&t())},document.body.appendChild(n)},loadScript:function(e,t){if("string"==typeof e){var i=e;(e=[]).push(i)}var n=this,o=function(e,t){n.getScript(e.shift(),function(){e.length?o(e,t):t&&t()})};o(e,t)},changeNickname:function(e){if(!e||"string"!=typeof e||20<e.length)return!1;I.socket.emit("change_nickname",e)},sendPublicChatMsg:function(e){!e||300<e.length||I.socket.emit("chat_message",e)},sendPrivateChatMsg:function(e,t,i){var n=(new Date).getHours(),o=(new Date).getMinutes(),a=(new Date).getSeconds();o=9<o?o:"0"+o,a=9<a?a:"0"+a;var s={fromuserid:this.viewerid,fromusername:this.viewername,touserid:e,tousername:t,msg:$.trim(i),time:n+":"+o+":"+a};I.socket.emit("private_chat",JSON.stringify(s))},sendQuestionMsg:function(e){if(e&&!(300<e.length)){var t={action:"question",value:{userId:this.viewerid,userName:this.viewername,content:e}};try{I.socket.emit("question",JSON.stringify(t))}catch(i){}}},barrage:function(e,t){if("isMobile"!=R.isMobile()){var i=$.trim(e);i&&(i=e.replace(/\[em2?_([0-9]*)\]/g,""),k.barrage({txt:i,color:null==t?16777215:t}))}},getLine:function(){return"isMobile"!=R.isMobile()?k.getLine():R.src},changeLine:function(e){"isMobile"==R.isMobile()?R.changeLine(e):k.changeLine(e)},onlyAudio:function(){"isMobile"==R.isMobile()?R.onlyAudio():k.onlyAudio()},changeVideoScale:function(e){"isMobile"!=R.isMobile()&&k.changeVideoScale(e)},setSound:function(e){"isMobile"!=R.isMobile()&&k.setSound(e)},answerRollcall:function(e,t){var i={rollcallId:e,userId:this.viewerid,userName:this.viewername,publisherId:t};I.socket.emit("answer_rollcall",JSON.stringify(i))},replyVote:function(e,t,i){var n={voteId:e,voteOption:t,publisherId:i};I.socket.emit("reply_vote",JSON.stringify(n))},docBarrage:function(e,t){$.trim(e)&&T.barrage({txt:e,color:null==t?16777215:t})},openBarrage:function(e){k.openBarrage(e)},openDocBarrage:function(e){"isMobile"!=R.isMobile()&&S.fastMode&&S.openBarrage(e)},insertDocBarrage:function(e){"isMobile"!=R.isMobile()&&S.fastMode&&S.insertBarrage(e)},closeDocBarrage:function(){"isMobile"!=R.isMobile()&&S.fastMode&&S.closeBarrage()},showControl:function(e){k.showControl(e)},livePlayerInit:function(){k.init()},openSound:function(){k.openSound()},closeSound:function(){k.closeSound()},docAdapt:function(e){S.fastMode?S.docAdapt(e):d.adapt=e},requestInteraction:function(e){d.interaction.requestInteraction(e)},hangupInteraction:function(){d.interaction.hangupInteraction()},enterInteractionRoom:function(e){var t=undefined;try{I.socket.emit("speak_enter")}catch(i){t=i}finally{"function"==typeof e&&e(t)}},sendInteractionMessage:function(e,t,i,n,o){var a="audio";e.video&&(a="audiovideo");var s={type:a,fromname:this.viewername,fromid:this.viewerid,fromrole:"student",toid:t,event:i,data:JSON.stringify(n)},r=undefined;try{I.socket.emit("speak_message",JSON.stringify(s))}catch(c){r=c}finally{"function"==typeof o&&o(r)}},showMarquee:function(e){k.showMarquee(e)},closeMarquee:function(){k.closeMarquee()},showMarqueeDoc:function(e){S.fastMode?S.showMarquee(e):T.showMarquee(e)},closeMarqueeDoc:function(){S.fastMode&&S.closeMarquee()},setDocMode:function(e){S.fastMode&&S.setDocMode(e)},getDocs:function(e){S.fastMode&&S.getDocs(e)},changePageTo:function(e,t){S.fastMode&&S.changePageTo(e,t)},submitQuestionnaire:function(e,n){if(e){var t={questionnaireid:e.questionnaireId,answers:JSON.stringify({subjectsAnswer:e.subjectsAnswer})};$.ajax({url:"//eva.csslcloud.net/api/questionnaire/submit",type:"GET",dataType:"jsonp",timeout:5e3,data:t,xhrFields:{withCredentials:!0},success:function(e){n?n(e):console.log&&console.log("no callback")},error:function(e,t,i){n&&n({errorCode:1,msg:"request was aborted",result:i})}})}},getPublishingQuestionnaire:function(){o("//eva.csslcloud.net/api/questionnaire/info",{},P.onQuestionnairePublish)},getPracticeInfo:function(e,t){var i={practiceId:e,sessionId:I.options.key};o("//eva.csslcloud.net/api/practice/info",i,t)},submitPracticeInfo:function(e,t,i){var n={practiceId:e,options:t,sessionId:I.options.key};o("//eva.csslcloud.net/api/practice/submit",n,i)},getPracticeStatisInfo:function(e,t){var i={practiceId:e,sessionId:I.options.key};o("//eva.csslcloud.net/api/practice/statis",i,t)},getPracticeRanking:function(e,t){var i={practiceId:e,sessionId:I.options.key};o("//eva.csslcloud.net/api/practice/ranking",i,t)}},a={init:function(){this.userId=P.userid,this.roomId=P.roomid,this.groupId=P.groupId,this.liveId=P.liveid,this.viewerId=P.viewerid,this.upId=P.upid}},I={options:{pusherUrl:"",key:"",maxMessageCount:300,userId:"",roomId:"",livePlayerId:"",drawPanel:""},drawjson:[],pagechangedata:[],publishStreamTimer:0,endStreamTimer:0,init:function(){var e="isMobile"==R.isMobile()?1:0;P.forceNew?(this.socket=io.connect(this.options.pusherUrl+"?sessionid="+I.options.key+"&platform=1&terminal="+e,{forceNew:!0}),l("forceNew: true")):(this.socket=io.connect(this.options.pusherUrl,{query:{sessionid:I.options.key,platform:1,terminal:e}}),l("forceNew: false")),this.bind()},bind:function(){var i=!1;this.socket.on("connect",function(){"function"==typeof window.onSocketConnect&&window.onSocketConnect()}),this.socket.on("disconnect",function(){"function"==typeof window.onSocketDisconnect&&window.onSocketDisconnect()}),this.socket.on("page_change",function(e){if(e&&"string"==typeof e&&I.pagechangedata.push(JSON.parse(e)),"function"==typeof window.on_cc_live_dw_page_change&&window.on_cc_live_dw_page_change(e),"function"==typeof P.onPageChange){var t=JSON.parse(e),i={docId:t.value.docid,docName:t.value.fileName,docTotalPage:t.value.totalPage,pageNum:t.value.page};P.onPageChange(i)}}),this.socket.on("change_nickname",function(e){P.viewername=e,"function"==typeof P.onChangeNickname&&P.onChangeNickname(e)}),this.socket.on("animation_change",function(e){"function"==typeof window.on_cc_live_dw_animation_change&&window.on_cc_live_dw_animation_change(e)}),this.socket.on("draw",function(e){e&&"string"==typeof e&&I.drawjson.push(JSON.parse(e)),"function"==typeof window.on_cc_live_dw_draw&&window.on_cc_live_dw_draw(e)}),this.socket.on("room_user_count",function(e){"function"==typeof P.onUserCountMessage&&P.onUserCountMessage(e)}),this.socket.on("publish_stream",function(e){this.publishStreamTimer&&clearTimeout(this.publishStreamTimer),this.publishStreamTimer=setTimeout(function(){k&&(k.isPublishing=1),k&&k.start&&k.start(),"function"==typeof P.onLiveStart&&P.onLiveStart(e)},n())}),this.socket.on("end_stream",function(e){this.endStreamTimer&&clearTimeout(this.endStreamTimer),this.endStreamTimer=setTimeout(function(){k&&(k.isPublishing=0),k&&k.end&&k.end(),T&&T.clear&&T.clear(),S.clear(),"function"==typeof P.onLiveEnd&&P.onLiveEnd(e)},n())}),this.socket.on("kick_out",function(e){I.socket.disconnect(),"function"==typeof P.onKickOut&&P.onKickOut(e),R.isIPad()||R.isIPhone()||R.isAndroid()||R.isWindowsPhone()||k.getFlash()._kickOff()}),this.socket.on("announcement",function(e){"release"==(e=f(e)).action?"function"==typeof P.onAnnouncementRelease&&P.onAnnouncementRelease(e.announcement):"remove"==e.action&&"function"==typeof P.onAnnouncementRemove&&P.onAnnouncementRemove(e)}),this.socket.on("start_rollcall",function(e){e=f(e),"function"==typeof P.onStartRollCall&&P.onStartRollCall(e)}),this.socket.on("start_lottery",function(e){e=f(e),"function"==typeof P.onStartLottery&&P.onStartLottery(e)}),this.socket.on("win_lottery",function(e){e=f(e),"function"==typeof P.onWinLottery&&P.onWinLottery(e)}),this.socket.on("stop_lottery",function(e){e=f(e),"function"==typeof P.onStopLottery&&P.onStopLottery(e)}),this.socket.on("start_vote",function(e){e=f(e),"function"==typeof P.onStartVote&&P.onStartVote(e)}),this.socket.on("stop_vote",function(e){e=f(e),"function"==typeof P.onStopVote&&P.onStopVote(e)}),this.socket.on("vote_result",function(e){e=f(e),"function"==typeof P.onVoteResult&&P.onVoteResult(e)}),this.socket.on("ban_stream",function(e){e=f(e),P.isBan=1,"isMobile"==R.isMobile()?R.ban():k.banLive(),"function"==typeof P.onBanStream&&P.onBanStream(e)}),this.socket.on("unban_stream",function(e){e=f(e),P.isBan=0,"isMobile"==R.isMobile()?R.unban():k.unbanLive(),"function"==typeof P.onUnBanStream&&P.onUnBanStream(e)}),this.socket.on("room_setting",function(e){if(e=f(e),"function"==typeof P.onRoomSetting&&P.onRoomSetting(e),e.layout_video_main!=i){var t=e.layout_video_main;"function"==typeof P.onSwitchVideoDoc&&P.onSwitchVideoDoc(t),i=t}}),this.socket.on("silence_user_chat_message",function(e){"function"==typeof P.onSilenceUserChatMessage&&P.onSilenceUserChatMessage(f(e))}),this.socket.on("accept_speak",function(e){"function"==typeof window.on_cc_live_accept_interaction&&window.on_cc_live_accept_interaction(f(e))}),this.socket.on("speak_message",function(e){"function"==typeof window.on_cc_live_interaction_message&&window.on_cc_live_interaction_message(f(e))}),this.socket.on("speak_peer_list",function(e){"function"==typeof window.on_cc_live_interaction_chatusers&&window.on_cc_live_interaction_chatusers(f(e))}),this.socket.on("speak_disconnect",function(e){"function"==typeof window.on_cc_live_interaction_disconnect&&window.on_cc_live_interaction_disconnect(f(e))}),this.socket.on("broadcast_msg",function(e){"function"==typeof P.onBroadcastMsg&&P.onBroadcastMsg(f(e).value)}),this.socket.on("publish_question",function(e){"function"==typeof P.onQaPublish&&P.onQaPublish(f(e))}),this.socket.on("questionnaire_publish",function(e){e=f(e),"function"==typeof P.onQuestionnairePublish&&P.onQuestionnairePublish(e)}),this.socket.on("questionnaire_publish_stop",function(e){e=f(e),"function"==typeof P.onQuestionnairePublishStop&&P.onQuestionnairePublishStop(e)}),this.socket.on("practice_publish",function(e){e=f(e),"function"==typeof P.onPracticePublish&&P.onPracticePublish(e)}),this.socket.on("practice_stop",function(e){e=f(e),"function"==typeof P.onPracticePublishStop&&P.onPracticePublishStop(e)}),this.socket.on("practice_close",function(e){e=f(e),"function"==typeof P.onPracticeClose&&P.onPracticeClose(e)}),this.socket.on("prize_send",function(e){e=f(e),"function"==typeof P.onPrizeSend&&P.onPrizeSend(e)}),this.socket.on("questionnaire_publish_statis",function(e){e=f(e),"function"==typeof P.onQuestionnairePublishStatis&&P.onQuestionnairePublishStatis(e)}),this.socket.on("room_teachers",function(e){"function"==typeof P.onOnlineTeachers&&P.onOnlineTeachers(f(e))}),this.socket.on("external_questionnaire_publish",function(e){"function"==typeof P.onExternalQuestionnairePublish&&P.onExternalQuestionnairePublish(f(e))}),this.socket.on("ban_chat",function(e){"function"==typeof P.onBanChat&&P.onBanChat(f(e))}),this.socket.on("unban_chat",function(e){"function"==typeof P.onUnBanChat&&P.onUnBanChat(f(e))}),this.socket.on("switch_source",function(e){"function"==typeof P.onSwitchSource&&P.onSwitchSource(e)});var t=this;setTimeout(function(){try{t.socket.emit("room_user_count")}catch(e){}try{t.socket.emit("room_teachers")}catch(e){}},1500),setInterval(function(){try{t.socket.emit("room_user_count")}catch(e){}try{t.socket.emit("room_teachers")}catch(e){}},15e3)},requestInteraction:function(e,t){var i="audio";e.video&&(i+="video");var n={viewerId:P.viewerid,viewerName:P.viewername,type:i},o=undefined;try{this.socket.emit("request_speak",JSON.stringify(n))}catch(a){o=a}finally{"function"==typeof t&&t(o)}},cancelRequestInteraction:function(e,t){var i={viewerId:this.viewerid,viewerName:this.viewername,type:e};l("interaction","取消申请："+JSON.stringify(i));var n=undefined;try{this.socket.emit("cancel_request_speak",JSON.stringify(i))}catch(o){n=o}finally{"function"==typeof t&&t(n)}},hangupInteraction:function(e,t){var i={viewerId:P.viewerid,viewerName:P.viewername,type:e};l("interaction","挂断事件："+JSON.stringify(i));var n=undefined;try{this.socket.emit("hangup_interaction",JSON.stringify(i))}catch(o){n=o}finally{"function"==typeof t&&t(n)}}},k={id:"livePlayer",swfUrl:"//zeus.csslcloud.net/flash/Player.swf",isReady:!1,isPublishing:0,delay:"",foreignPublish:"",init:function(){var e={userid:P.userid,roomid:P.roomid,foreignPublish:this.foreignPublish,warmvideoid:this.warmVideoId,openhostmode:this.openHostMode,dvr:this.dvr,barrage:this.barrageData,backgroundImageUri:this.backgroundImageUri,backgroundHint:this.backgroundHint,countDownTime:P.liveCountdown,openMultiQuality:P.multiQuality,language:P.language||"",type:"liveplayer",upid:P.upid,viewerid:this.viewerid,ua:1},t=this.delay;0<t&&(e.buffer=t);swfobject.embedSWF(this.swfUrl,this.id,"100%","100%","10.0.0","/flash/expressInstall.swf",e,{allowFullscreen:"true",allowScriptAccess:"always",wmode:"transparent"})},getFlash:function(){return swfobject.getObjectById(this.id)},getPlayerTime:function(){var e=parseInt(this.getFlash()._time());return isNaN(e)||e<0?0:e},start:function(){if("isMobile"==R.isMobile()){if(P.isBan)return $("#livePlayer").css({"text-align":"center",color:"white","font-size":"18px","line-height":"232px"}),void $("#livePlayer").html("<p>直播已封禁，请联系管理员</p>");R.init()}else{if(!this.getFlash())return;this.isPublishing=1,this.getFlash()._streamStart()}},end:function(){if("isMobile"==R.isMobile())R.end();else{if(!this.getFlash())return;this.isPublishing=0,this.getFlash()._streamEnd()}},barrage:function(e){e&&this.getFlash()&&this.getFlash()._jsTOASbarrage&&this.getFlash()._jsTOASbarrage(e)},getLine:function(){var e=this.getFlash().getLine();return e&&(e=JSON.parse(e)),e},changeLine:function(e){this.getFlash().changeLine(e)},changeVideoScale:function(e){this.getFlash()._showScreenScale(e)},onlyAudio:function(){this.getFlash()._onlyAudio()},setSound:function(e){this.getFlash()._SetSound(e)},openSound:function(){this.getFlash()&&this.getFlash()._onSound()},closeSound:function(){this.getFlash()&&this.getFlash()._unSound()},openBarrage:function(e){this.getFlash()&&this.getFlash()._barrage(e)},showControl:function(e){this.getFlash()&&this.getFlash()._ShowControl(e)},banLive:function(){this.getFlash()&&this.getFlash()._banLive()},unbanLive:function(){this.getFlash()&&this.getFlash()._unbanLive()},showMarquee:function(e){e&&this.getFlash()&&this.getFlash()._showMarqueePlugin(e)},closeMarquee:function(){this.getFlash()&&this.getFlash()._closeMarqueePlugin({name:"PluginForMarquee"})}};var T={id:"drawPanel",isReady:!(window._onStart=function(){k.isReady=!0}),isProcessing:!1,getWidth:function(){return"100%"},getHeight:function(){return"100%"},swfUrl:"//zeus.csslcloud.net/flash/Player.swf",init:function(){R.isIPad()||R.isIPhone()||R.isAndroid()||R.isWindowsPhone()||S.fastMode||swfobject.embedSWF(this.swfUrl,this.id,this.getWidth(),this.getHeight(),"10.0.0","/flash/expressInstall.swf",{type:"drawpanel"},{allowFullscreen:"true",allowScriptAccess:"always",wmode:"transparent"},{})},getSwf:function(){if(this.isReady)return swfobject.getObjectById(this.id)},clear:function(){var e=this.getSwf();e&&(e._streamEnd(),I.pagechangedata=[],I.drawjson=[])},draw:function(e){var t=this.getSwf();t&&t.draw(e)},draws:function(e){var t,i=this.getSwf();i&&(t=e,setTimeout(function(){i.drawList(t)}))},filp:function(e){var t=this.getSwf();if(t){var i=P.documentDisplayMode;this.displayMode=1==i?"auto":2==i?"width":"auto",d.adapt!==undefined&&(this.displayMode=d.adapt?"auto":"width");var n=JSON.parse(e),o=n.url;"https:"===window.location.protocol&&(n.url=o.replace(/http:/g,"https:")),t.filp(JSON.stringify(n),this.displayMode)}},animationFilp:function(e){var t=this.getSwf();t&&t.animation(e)},barrage:function(e){e&&this.getSwf()&&this.getSwf()._jsTOASbarrage&&this.getSwf()._jsTOASbarrage(e)},showMarquee:function(e){e&&this.getSwf()&&this.getSwf().showMarqueeLight(e)}},y=[],_=[],b=[],M=!1,c=function(){$.ajax({url:"//view.csslcloud.net/api/view/info?userid="+P.userid+"&roomid="+P.roomid,type:"GET",dataType:"jsonp",success:function(e){if(e.success&&e.datas){var t=e.datas.meta;if(t&&(k.isPublishing=t.isPublishing,1==t.isPublishing)){for(var i=t.answer?t.answer:[],n=t.question?t.question:[],o=t.broadcast?t.broadcast:[],a=0;a<i.length;a++)for(var s=i[a],r=0;r<n.length;r++){(c=n[r]).encryptId==s.encryptId&&(s.questionUserId=c.questionUserId)}if(n&&n.length)for(a=0;a<n.length;a++){var c=n[a];"function"==typeof P.onQuestion&&P.onQuestion(JSON.stringify({action:"question",value:{id:c.encryptId,content:c.content,userId:c.questionUserId,groupId:c.groupId,userName:c.questionUserName,isPublish:c.isPublish,triggerTime:c.triggerTime,userAvatar:c.userAvatar}}))}if(i&&i.length)for(a=0;a<i.length;a++){s=i[a];"function"==typeof P.onAnswer&&P.onAnswer(JSON.stringify({action:"answer",value:{questionId:s.encryptId,isPrivate:s.isPrivate,content:s.content,userId:s.answerUserId,groupId:s.groupId,userName:s.answerUserName,questionUserId:s.questionUserId,triggerTime:s.triggerTime,userAvatar:s.userAvatar}}))}if(o&&o.length)for(a=0;a<o.length;a++){var u=o[a];"function"==typeof P.onBroadcastMsg&&P.onBroadcastMsg({content:u.content,time:u.time})}"isMobile"==R.isMobile()&&$.DrawingBoard&&$.DrawingBoard.history(t),S.history(t);var d=t.chatLog;if(d&&d.length){var l=[];for(a=0;a<d.length;a++){var f=d[a];l.push({userid:f.userId,username:f.userName,userrole:f.userRole,useravatar:f.userAvatar,groupId:f.groupId,msg:f.content,time:f.time,chatId:f.chatId,status:f.status,usercustommark:f.userCustomMark})}if("function"==typeof P.onPublicChatMessage)for(var h=0;h<l.length;h++)P.onPublicChatMessage(JSON.stringify(l[h]))}if(!S.fastMode){var p=t.pageChange;if(p&&p.length){p.sort(function(e,t){return parseInt(e.time)-parseInt(t.time)});var g=p.pop();_.push(JSON.stringify({fileName:g.docName,totalPage:g.docTotalPage,docid:g.encryptDocId,url:g.url,page:g.pageNum,time:g.time,useSDK:g.useSDK}))}var m=t.animation;if(m&&m.length){m.sort(function(e,t){return parseInt(e.time)-parseInt(t.time)});var w=m.pop();b.push(JSON.stringify({fileName:w.docName,totalPage:w.docTotalPage,docid:w.encryptDocId,url:w.url,page:w.pageNum,time:w.time,step:w.step}))}var v=t.draw;if(v&&v.length)for(a=0;a<v.length;a++)y.push(v[a].data)}M=!0}}}})},d=new function(e){this.interaction=new t(e)}({interaction:{id:"interactionPlayer",width:"100%",height:"100%"}});window.on_drampanel_ready=function(){T.isReady=!0,setTimeout(function(){!function o(){if(M){if(!S.fastMode&&(y.length&&(T.draws(y),y=[]),_.length)){var e=_.pop();if(!e)return;if(T.filp(e),b.length){var t=b.pop(),i=f(t),n=f(e);n.docid==i.docid&&n.time<=i.time&&T.animationFilp(t)}_=[]}}else setTimeout(function(){o()},3e3)}()},1500)},window.on_cc_live_dw_draw=function(t){setTimeout(function(){S.draw(t)},e()),setTimeout(function(){var e=f(t);T.draw(JSON.stringify(e.value.data))},e()),"isMobile"==R.isMobile()&&setTimeout(function(){$.DrawingBoard&&$.DrawingBoard.db(t)},e())},window.on_cc_live_dw_page_change=function(t){setTimeout(function(){S.pageChange(t)},e()),setTimeout(function(){var e=f(t);T.filp(JSON.stringify(e.value))},e()),"isMobile"==R.isMobile()&&setTimeout(function(){$.DrawingBoard&&$.DrawingBoard.db(t)},e())},window.on_cc_live_dw_animation_change=function(t){setTimeout(function(){S.animationChange(t)},e()),setTimeout(function(){var e=f(t);T.animationFilp(JSON.stringify(e.value))},e()),"isMobile"==R.isMobile()&&setTimeout(function(){$.DrawingBoard&&$.DrawingBoard.db(t)},e())};var C={init:function(){I.socket.on("chat_message",function(e){"function"==typeof P.onPublicChatMessage&&P.onPublicChatMessage(e)}),I.socket.on("chat_log_manage",function(e){"function"==typeof P.onPublicChatLogManage&&P.onPublicChatLogManage(e)}),I.socket.on("notification",function(e){"function"==typeof P.onNotification&&P.onNotification(e)}),I.socket.on("information",function(e){"function"==typeof P.onInformation&&P.onInformation(e)}),I.socket.on("private_chat_self",function(e){"function"==typeof P.onPrivateChatMessage&&P.onPrivateChatMessage(e)}),I.socket.on("private_chat",function(e){"function"==typeof P.onPrivateAnswer&&P.onPrivateAnswer(e)}),I.socket.on("room_context",function(e){}),I.socket.on("custom_message",function(e){"function"==typeof P.onCustomChatMessage&&P.onCustomChatMessage(e)})}},N={init:function(){I.socket.on("question",function(e){"function"==typeof P.onQuestion&&P.onQuestion(e),"function"==typeof P.onQuestionSend&&P.onQuestionSend(e)}),I.socket.on("answer",function(e){"function"==typeof P.onAnswer&&P.onAnswer(e),"function"==typeof P.onAnswerSend&&P.onAnswerSend(e)})}},s={addEvents:function(e,t,i){document.addEventListener?s.addEvents=function(e,t,i){e.addEventListener(t,i,!1)}:s.addEvents=function(e,t,i){e.attachEvent("on"+t,function(){i.call(e,arguments)})},s.addEvents(e,t,i)}},R={src:"",audio:!1,line:0,init:function(){var o=this;$.ajax({url:"//zeus.csslcloud.net/api/hls/play",type:"GET",dataType:"json",data:{roomid:P.roomid,userid:P.userid},success:function(e){if(0==e.live.status){o.m3u8=e.live.m3u8,o.src=e.live.m3u8,o.secureHosts=e.live.secureHosts||[],o.audioM3u8=e.live.audioM3u8||[],o.audioSecureHosts=e.live.audioSecureHosts||[],o.isHttps="https:"===window.location.protocol,a.init(),a.liveId=e.live.liveId,o.isHttps&&o.secureHosts&&o.secureHosts.length&&(o.m3u8=o.secureHosts),o.appendVideo(o.m3u8[0]),"function"==typeof P.onLiveStarting&&P.onLiveStarting();var t=$("#livePlayer>video")[0],i=0,n=function(){3<=i?t.removeEventListener("error",n):(t.removeEventListener("error",n),setTimeout(function(){i++,t.src=t.src,s.addEvents(t,"error",n,!1)},1e3))};s.addEvents(t,"error",n,!1)}else if(P.isBan)return $("#livePlayer").css({"text-align":"center",color:"white","font-size":"18px","line-height":"232px"}),void $("#livePlayer").html("<p>直播已封禁，请联系管理员</p>")}})},appendVideo:function(e){var t='<video id="player_live" webkit-playsinline playsinline controls autoplay x-webkit-airplay="allow" x5-playsinline width="100%" height="100%" src="'+e+'"></video>';$("#"+k.id).html(t);var i=document.getElementById("player_live");P.onKickOut=function(){$("#"+k.id).html("")},this.report=new ReportLog(a,1,11,i,!0)},ban:function(){$("#livePlayer").css({"text-align":"center",color:"white","font-size":"18px","line-height":"232px"}),$("#livePlayer").html("<p>直播已封禁，请联系管理员</p>")},unban:function(){$("#livePlayer").css({"text-align":"",color:"","font-size":"","line-height":""}),this.init()},end:function(){$("#"+k.id).html(""),this.report.stopTimer()},appendDoc:function(e){"https:"===window.location.protocol&&(e=e.replace(/http:/g,"https:"));var t='<img src="'+e+'" />';$("#"+T.id).html(t)},changeLine:function(e){$("#"+k.id).find("video").attr("src",this.m3u8[e]),this.line=e,R.audio&&(audio.src="",audio.src=this.m3u8[this.line],audio.play())},onlyAudio:function(){var e=$("#"+k.id).find("video");R.audio=!R.audio,R.audio?(this.isHttps&&this.audioSecureHosts&&this.audioSecureHosts.length?this.m3u8=this.audioSecureHosts:this.m3u8=this.audioM3u8,audio=new Audio,audio.src=this.m3u8[this.line],audio.play()):(this.isHttps&&this.secureHosts&&this.secureHosts.length?this.m3u8=this.secureHosts:this.m3u8=this.src,audio.src="",e.attr("src",this.m3u8[this.line]))},isMobile:function(){if(this.isIPad()||this.isIPhone()||this.isAndroid()||this.isWindowsPhone())return"isMobile"},isIPad:function(){return null!=navigator.userAgent.match(/iPad/i)},isIPhone:function(){return null!=navigator.userAgent.match(/iPhone/i)},isAndroid:function(){return null!=navigator.userAgent.match(/Android/i)},isWindowsPhone:function(){return null!=navigator.userAgent.match(/Windows Phone/i)}};window.on_cc_live_accept_interaction=function(e){P.closeSound(),d.interaction.clearRequestTimeoutTimer(),P.enterInteractionRoom(),d.interaction.isInteractioning=!0,d.interaction.setCallingTimer(),"function"==typeof window.on_cc_live_interaction_accept&&window.on_cc_live_interaction_accept(d.interaction.local.type,f(e))},window.on_cc_live_interaction_chatusers=function(e){e=f(e),$.each(e,function(e,t){return t.id==P.viewerid||("publisher"==t.role&&!t.isMainSpeaker||void d.interaction.createOfferPeerConnection(t))})},window.on_cc_live_interaction_message=function(e){e=f(e);l("Interaction","rtc互动信息:"+JSON.stringify(e));var t=e.toid,i=e.fromid,n=e.fromname,o=e.type,a=e.data;"string"==typeof a&&(a=JSON.parse(a));var s=e.event;if("offer"===s){if(a.type=s,d.interaction.createAnswerPeerConnection({id:i,name:n,type:o}),!(r=d.interaction.usersPcs[i].pc))return;r.setRemoteDescription(new nativeRTCSessionDescription(a)),r.createAnswer(function(){},function(e){l("Interaction","Failure callback: "+e)})}else if("answer"===s){if(!(r=d.interaction.usersPcs[i].pc))return;a.type=s,l("Interaction","answer spark_message信息:"+a),r.setRemoteDescription(new nativeRTCSessionDescription(a)),r.receivedAnswer=!0,!r.hasAddIce&&r.RTCICE&&r.addIceCandidate(r.RTCICE)}else{var r,c=d.interaction.usersPcs[i];if(c||(c=d.interaction.usersPcs[t]),!(r=c?c.pc:null))return;var u=new RTCIceCandidate(a);r.receivedAnswer?(r.hasAddIce=!0,r.addIceCandidate(u)):(r.hasAddIce=!1,r.RTCICE=u)}},window.isDebug=!1;var l=function(e,t){window.isDebug&&console&&"function"==typeof console.log&&console.log(e,t)};function f(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return{}}return e}function e(){var e=k.delay;return(isNaN(e)||e<0)&&(e=0),e*=1e3,"isMobile"==R.isMobile()?0===e?5e3:1e4:0===e?1300:3e3}function n(){var e=k.delay;return(isNaN(e)||e<0)&&(e=0),"isMobile"==R.isMobile()?0===e?5e3:1e4:0===e?1300:3e3}window.DWLive=P,window.live=d,window._swfInit=function(){"function"==typeof window.on_cc_live_player_ready&&window.on_cc_live_player_ready()},window._swfOk=function(e){"function"==typeof window.on_cc_swf_loading_completed&&window.on_cc_swf_loading_completed(e)}}(window)}]);