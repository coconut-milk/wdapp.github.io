(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d8797ec"],{"16d5":function(e,t,i){"use strict";var s=i("a12c"),n=i.n(s);n.a},"250e":function(e,t,i){"use strict";var s=i("8979"),n=i.n(s);n.a},"3ca3":function(e,t,i){"use strict";var s=i("6547").charAt,n=i("69f3"),o=i("7dd0"),r="String Iterator",a=n.set,u=n.getterFor(r);o(String,"String",(function(e){a(this,{type:r,string:String(e),index:0})}),(function(){var e,t=u(this),i=t.string,n=t.index;return n>=i.length?{value:void 0,done:!0}:(e=s(i,n),t.index+=e.length,{value:e,done:!1})}))},"5bdc":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShowQuestionnaireWrapper?i("div",{staticClass:"questionnaire-wrapper"},[i("animation-fade",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowQuestionnaire,expression:"isShowQuestionnaire"}],staticClass:"questionnaire-container"},[i("div",{staticClass:"questionnaire-wrap"},[i("div",{staticClass:"questionnaire-header-wrap"},[i("div",{staticClass:"questionnaire-header-title-wrap"},[i("p",{staticClass:"questionnaire-header-title-text"},[e._v(" "+e._s(e.isShowResult?e.resultTitle:e.title)+" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!!e.isShowResult||!e.questionnaire.forcibly,expression:"isShowResult ? true : !questionnaire.forcibly"}],staticClass:"questionnaire-header-close-wrap",on:{click:e.onClose}},[i("van-icon",{staticClass:"questionnaire-header-close-btn",attrs:{name:"cross"}})],1)]),i("div",{staticClass:"questionnaire-body-wrap"},[i("div",{staticClass:"questionnaire-body-title-wrap"},[i("p",{staticClass:"questionnaire-body-title-text"},[e._v(" "+e._s(e.questionnaire.title)+" ")])]),i("div",{staticClass:"questionnaire-body-questions-wrap",class:{"question-active":e.isShowResult}},[i("van-radio-group",{attrs:{disabled:e.disabled},model:{value:e.result,callback:function(t){e.result=t},expression:"result"}},[i("van-cell-group",e._l(e.questionnaire.options,(function(t,s){return i("van-cell",{key:s,staticClass:"question-item",class:{active:e.isActive(s),select:e.isSelect(s),correct:e.isCorrect(s)},attrs:{title:e.formatContent(t),clickable:""},on:{click:function(t){return e.onCellClick(s)}}},[i("van-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"van-radio",attrs:{slot:"right-icon",name:s},slot:"right-icon"})],1)})),1)],1)],1),i("div",{staticClass:"questionnaire-footer-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowResult,expression:"!isShowResult"}],staticClass:"questionnaire-footer-btn-wrap",on:{click:e.onSubmit}},[i("div",{staticClass:"questionnaire-footer-btn"},[e._v("确定提交")])])])])])])]),i("van-popup",{on:{closed:e.onClosed},model:{value:e.show,callback:function(t){e.show=t},expression:"show"}},[i("span",{staticClass:"popup-icon",class:e.popup.type}),e._v(" "+e._s(e.popup.message)+" ")])],1):e._e()},n=[],o=(i("a4d3"),i("e01a"),i("d28b"),i("c975"),i("d3b7"),i("3ca3"),i("ddb0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",[e._t("default")],2)}),r=[],a={name:"Fade"},u=a,c=(i("16d5"),i("2877")),l=Object(c["a"])(u,o,r,!1,null,"4211a8f5",null),h=l.exports,d=i("af10"),f=i("90b9"),p={name:"Questionnaire",components:{AnimationFade:h},props:{questionnaire:{type:Object,default:function(){return{}}}},data:function(){return{title:"问卷",resultTitle:"答题结果",messageBoxTimer:0,messageBoxTimerInterval:2e3,isShowQuestionnaireWrapper:!1,isShowQuestionnaire:!1,isShowResult:!1,result:-1,max:1,disabled:!1,show:!1,success:!0,popup:{type:"success",message:"提交成功"}}},computed:{formatResult:function(){var e=[],t=["A","B","C","D","E","F","G","H","I","J"];return e.push(t[this.result]),e}},watch:{questionnaire:function(){this.isShowQuestionnaireWrapper=!0,this.isShowQuestionnaire=!0,this.disabled=!1,this.result=-1}},methods:{isActive:function(e){return this.result===e},isSelect:function(e){return this.isShowResult&&this.result===e},isCorrect:function(e){return this.isShowResult&&this.questionnaire.correct==e},onCellClick:function(e){this.disabled||(this.result=e)},formatContent:function(e){return e.key+"."+e.content},showMessageBox:function(e,t){var i=this;this.show=!0,this.popup={type:e,message:t},this.messageBoxTimer&&clearTimeout(this.messageBoxTimer),this.messageBoxTimer=setTimeout((function(){i.show=!1,i.messageBoxTimer=0}),this.messageBoxTimerInterval)},onClose:function(){this.isShowQuestionnaireWrapper=!1,this.isShowQuestionnaire=!1},onSubmit:function(){var e=this;if(-1===this.result)return!1;var t=this.formatResult[0];Object(f["b"])("select",t);var i="",s=!0,n=!1,o=void 0;try{for(var r,a=this.questionnaire.options[Symbol.iterator]();!(s=(r=a.next()).done);s=!0){var u=r.value;if(t===u.key){i=u.id;break}}}catch(l){n=!0,o=l}finally{try{s||null==a.return||a.return()}finally{if(n)throw o}}var c={questionnaireId:this.questionnaire.questionnaireId,subjectsAnswer:[{selectedOptionId:i,subjectId:this.questionnaire.subjectId}]};this.isShowQuestionnaire=!1,this.HD.submitQuestionnaire(c,(function(t){Object(f["b"])("submitQuestionnaire",t),t.success?(e.success=!0,e.showMessageBox("success","提交成功")):(e.success=!1,e.showMessageBox("fail","提交失败"))}))},onClosed:function(){this.messageBoxTimer&&clearTimeout(this.messageBoxTimer),this.messageBoxTimer=0,this.success&&this.questionnaire.submitedAction?(this.isShowQuestionnaire=!0,this.isShowResult=!0,this.disabled=!0):this.stopQuestionnaire()},isError:function(e){return-1!==this.formatResult.indexOf(e)},isRight:function(e){return this.questionnaire.correct===e},stopQuestionnaire:function(){this.isShowQuestionnaireWrapper=!1,this.isShowQuestionnaire=!1,this.isShowResult=!1,this.disabled=!1,this.messageBoxTimer&&clearTimeout(this.messageBoxTimer),this.messageBoxTimer=0,this.show=!1}},mounted:function(){var e=this;this.HD=new d["a"],this.HD.onQuestionnairePublishStop((function(t){Object(f["b"])("onQuestionnairePublishStop",t),e.stopQuestionnaire()}))}},v=p,m=(i("250e"),i("8fe6"),Object(c["a"])(v,s,n,!1,null,"3dceb67d",null));t["default"]=m.exports},8979:function(e,t,i){},"8fe6":function(e,t,i){"use strict";var s=i("b816"),n=i.n(s);n.a},a12c:function(e,t,i){},b816:function(e,t,i){},d28b:function(e,t,i){var s=i("746f");s("iterator")},ddb0:function(e,t,i){var s=i("da84"),n=i("fdbc"),o=i("e260"),r=i("9112"),a=i("b622"),u=a("iterator"),c=a("toStringTag"),l=o.values;for(var h in n){var d=s[h],f=d&&d.prototype;if(f){if(f[u]!==l)try{r(f,u,l)}catch(v){f[u]=l}if(f[c]||r(f,c,h),n[h])for(var p in o)if(f[p]!==o[p])try{r(f,p,o[p])}catch(v){f[p]=o[p]}}}},e01a:function(e,t,i){"use strict";var s=i("23e7"),n=i("83ab"),o=i("da84"),r=i("5135"),a=i("861d"),u=i("9bf2").f,c=i("e893"),l=o.Symbol;if(n&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var h={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new l(e):void 0===e?l():l(e);return""===e&&(h[t]=!0),t};c(d,l);var f=d.prototype=l.prototype;f.constructor=d;var p=f.toString,v="Symbol(test)"==String(l("test")),m=/^Symbol\((.*)\)[^)]+$/;u(f,"description",{configurable:!0,get:function(){var e=a(this)?this.valueOf():this,t=p.call(e);if(r(h,e))return"";var i=v?t.slice(7,-1):t.replace(m,"$1");return""===i?void 0:i}}),s({global:!0,forced:!0},{Symbol:d})}}}]);
//# sourceMappingURL=chunk-5d8797ec.e6c8407c.js.map